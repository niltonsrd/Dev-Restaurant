<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>{{ settings.site_title }}</title>

    <link rel="icon" href="{{ settings.logo_path }}" type="image/png" />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <style>
      :root {
        --bg-image: url("{{ settings.background_path }}");
      }
    </style>
  </head>

  <body>
    <div class="container">
      <header>
        <div class="brand">
          <img src="{{ settings.logo_path }}" class="logo" alt="logo" />

          <div>
            <h1>{{ settings.site_title }}</h1>
            <p>
              {{ settings.address_street }}, {{ settings.address_number }} ‚Äî {{
              settings.address_city }}/{{ settings.address_state }}
            </p>
            <p class="subtitle">{{ settings.site_description }}</p>
          </div>
        </div>

        <div class="controls">
          <a class="btn btn-primary" href="/admin">√Årea Administrativa</a>
        </div>
      </header>

      <main>
        <section>
          <h2>Card√°pio</h2>

          <div class="filters" id="filter-container"></div>

          <div class="catalog" id="catalog"></div>
        </section>

        <aside class="sidebar">
          <h3>Seu Carrinho</h3>

          <div id="cartList"></div>

          <div class="cart-total">
            <div>Total</div>
            <div id="cartTotal">R$ 0,00</div>
          </div>

          <!-- Nome -->
          <label for="customerName"
            >Nome de quem recebe <span class="required">*</span></label
          >
          <input id="customerName" placeholder="Nome de quem recebe" required />

          <!-- Tipo de Entrega -->
          <div>
           <div class="delivery-options">

  <label class="delivery-card">
    <input
      type="radio"
      name="tipo_entrega"
      value="entrega"
      checked
    />
    <div class="delivery-content">
      <div class="delivery-icon">üõµ</div>
      <div>
        <div class="delivery-title">Entrega</div>
        <div class="delivery-desc">
          Receba no seu endere√ßo
        </div>
      </div>
    </div>
  </label>

  <label class="delivery-card">
    <input
      type="radio"
      name="tipo_entrega"
      value="retirada"
    />
    <div class="delivery-content">
      <div class="delivery-icon">üè™</div>
      <div>
        <div class="delivery-title">Retirada no local</div>
        <div class="delivery-desc">
          Buscar no balc√£o
        </div>
      </div>
    </div>
  </label>

</div>

          </div>

          <!-- CEP -->
          <label for="inputCEP"
            >CEP (Para c√°lculo da Taxa) <span class="required">*</span></label
          >
          <input
            id="inputCEP"
            placeholder="00000-000"
            type="text"
            maxlength="9"
            oninput="formatCEP(this)"
            onblur="calcularFreteBackend()"
            required
          />

          <!-- Rua -->
          <label for="customerStreet"
            >Rua / Logradouro <span class="required">*</span></label
          >
          <input
            id="customerStreet"
            placeholder="Rua / Logradouro (Autom√°tico)"
            readonly
            required
          />

          <!-- N√∫mero -->
          <label for="customerNumber"
            >N√∫mero <span class="required">*</span></label
          >
          <input
            id="customerNumber"
            placeholder="N√∫mero"
            type="text"
            required
          />

          <!-- Refer√™ncia -->
          <label for="customerReference">Refer√™ncia (Opcional)</label>
          <input id="customerReference" placeholder="Refer√™ncia (Opcional)" />

          <input type="hidden" id="customerAddress" value="" />
          <input type="hidden" id="customerBairro" name="bairro" value="" />

          <!-- Contato -->
          <label for="customerContact"
            >Contato (WhatsApp) <span class="required">*</span></label
          >
          <input
            id="customerContact"
            placeholder="Contato (WhatsApp)"
            required
          />

          <input
            type="hidden"
            id="deliveryTaxInput"
            name="delivery_tax"
            value="0.00"
          />

          <!-- Pagamento -->
          <label for="paymentMethod"
            >M√©todo de Pagamento <span class="required">*</span></label
          >

          <select id="paymentMethod" required>
            <option value="">Selecione</option>
            <option value="dinheiro">Dinheiro</option>
            <option value="cartao">Cart√£o</option>
            <option value="pix">Pix</option>
          </select>

          <!-- Pagamento - Dinheiro -->
          <div id="paymentCashBox" class="hidden">
            <label>Precisa de troco?</label>

            <select id="cashNeedChange">
              <option value="nao">N√£o</option>
              <option value="sim">Sim</option>
            </select>

            <input
              type="text"
              id="cashAmount"
              class="hidden"
              placeholder="Troco para quanto?"
            />
          </div>

          <!-- Pagamento - Cart√£o -->
          <div id="paymentCardBox" class="hidden pix-box">
            O motoboy leva a maquininha üí≥
          </div>

          <!-- Pagamento - Pix -->
          <div id="paymentPixBox" class="hidden pix-box">
            <p>Pague via PIX e envie o comprovante ‚ö°</p>

            <button class="btn" id="generatePixBtn">Gerar QR Code PIX</button>

            <div id="pixQrPreview" class="qr-preview hidden"></div>

            <label>Enviar comprovante:</label>

            <input type="file" id="pixComprovante" accept="image/*" />
          </div>

          <!-- Observa√ß√£o -->
          <label for="customerNote">Observa√ß√£o</label>
          <textarea
            id="customerNote"
            placeholder="Ex: tirar cebola, ponto da carne, etc"
            rows="3"
          ></textarea>

          <!-- Finalizar -->
          <button id="btnCheckout" class="btn btn-accent" disabled>
            Finalizar pedido (WhatsApp)
          </button>
        </aside>
      </main>

      <footer>Desenvolvido por Nilton Santos ‚Äî NTDEV</footer>
    </div>

    <div
      id="toast-container"
      style="position: fixed; bottom: 20px; right: 20px; z-index: 9999"
    ></div>

    <div id="configureModal" class="modal-overlay hidden">
      <div class="modal-window">
        <div class="modal-header">
          <h2 id="configProductTitle" class="modal-title"></h2>
          <button class="close-btn" onclick="closeConfigureModal()">√ó</button>
        </div>

        <p class="base-price">
          Pre√ßo Base: <strong id="configBasePrice"></strong>
        </p>

        <div id="configOptionsContainer" class="options-scroll">
          <!-- Gerado via JS -->
        </div>

        <div class="modal-bottom-bar">
          <div class="qty-box">
            <button class="qty-btn" onclick="modalChangeQty(-1)">‚àí</button>
            <input
              id="configQtyInput"
              class="qty-input"
              type="number"
              value="1"
              min="1"
              readonly
            />
            <button class="qty-btn" onclick="modalChangeQty(1)">+</button>
          </div>

          <button id="configAddBtn" class="add-btn" disabled>
            Adicionar ‚Äî <span id="configFinalPrice"></span>
          </button>
        </div>
      </div>
    </div>

    <div id="decisionModal" class="modal-overlay hidden">
      <div class="modal-content">
        <h3>‚úÖ Item Adicionado!</h3>
        <p>O que voc√™ gostaria de fazer agora?</p>

        <div class="modal-actions">
          <button id="continueShoppingBtn" class="btn btn-secondary">
            Continuar Comprando
          </button>

          <button id="goToCartBtn" class="btn btn-accent">
            Ir para o Carrinho
          </button>
        </div>
      </div>
    </div>

    <div id="cepWarningModal" class="modal-bg hidden">
      <div class="modal">
        <h3>Aviso de Entrega</h3>
        <p id="cepWarningText">
          N√£o foi poss√≠vel obter coordenadas para este CEP. Aplicando taxa
          m√°xima.
        </p>
        <button class="btn" onclick="closeCepWarning()">Ok</button>
      </div>
    </div>

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
